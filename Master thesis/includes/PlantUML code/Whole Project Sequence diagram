@startuml
!pragma teoz true
box "Supply Chain (BDI-Agents and Smart Contrcats)" #LightYellow
actor Customer

box "Supply Chain Framework" #LightBlue
entity MainAgent
Participant ManufacturerAgent
Participant WholesalerAgent
Participant RetailerAgent
end box

end box

note over Customer: Want to buy
activate Customer #LightGrey
Customer -> MainAgent : Approch Framework
activate MainAgent #LightGrey

MainAgent -> RetailerAgent : Activates ""RetailerAgent""

RetailerAgent -> RetailerAgent: Checks Warehouse
note right RetailerAgent #Pink : //If it has product then sell// \n //to Customer otherwise it// \n will let the ""MainAgent"" \n //to activate ""WholesalerAgent"".// \n (Assume no product)

RetailerAgent -> MainAgent : request to activate ""WholesalerAgent""
MainAgent-> WholesalerAgent: Activates ""WholesalerAgent""
WholesalerAgent -> WholesalerAgent : Checks Warehouse
note over WholesalerAgent #Pink : (Assume no product)
WholesalerAgent -> MainAgent : request to activate ""ManufacturerAgent""
MainAgent-> ManufacturerAgent: Activates ""ManufacturerAgent""
ManufacturerAgent -> ManufacturerAgent : Checks Warehouse
note over ManufacturerAgent #Pink : (Assume no product)

box "Blockchain Framework" #LightGreen
database EthereumVirtualMachine as EVM
end box

note over ManufacturerAgent: //Manufatures product//
ManufacturerAgent -> EVM: invoking ""produceItemByManufacturer()""
activate ManufacturerAgent #DarkSalmon
activate EVM #FFBBBB
note over EVM #Orange: Generating ""Transaction Hash""
note right #yellow: **""Tx hash""**  for \n Product manufactured

note over ManufacturerAgent: //Packages product//
ManufacturerAgent -> EVM: invoking ""packageItemByManufacturer()""
note right #yellow: **""Tx hash""**  for \n Product packaged

note over ManufacturerAgent: //Out for Sale//
ManufacturerAgent-> EVM: invoking ""sellItemByManufacturer()""
note right #yellow: **""Tx hash""**  for \n Product sold

note over WholesalerAgent: //Purchase Product by paying// \n //the desire amount by ""ManufacturerAgent""//
WholesalerAgent -> ManufacturerAgent : Purchases product
activate WholesalerAgent #DarkSalmon
WholesalerAgent -> EVM  : invoking ""purchaseItemByWholesaler()""
note right #yellow: **""Tx hash""**  for \n Product purchased

note over ManufacturerAgent: //Sending Product to ""WholesalerAgent""//
ManufacturerAgent -> WholesalerAgent: Ships Product
ManufacturerAgent -> EVM: invoking ""shippedItemByManufacturer()""
note right #yellow: **""Tx hash""**  for \n Product shipped

deactivate ManufacturerAgent 

note over WholesalerAgent: //Receives Product//
WholesalerAgent -> EVM: invoking ""receivedItemByWholesaler()""
note right #yellow: **""Tx hash""**  for \n Product received

note over WholesalerAgent: //Out for Sale//
WholesalerAgent-> EVM: invoking ""sellItemByWholesaler()""
note right #yellow: **""Tx hash""**  for \n Product sold

note over RetailerAgent: //Purchase Product by paying// \n //the desire amount by ""WholesalerAgent""//

RetailerAgent -> WholesalerAgent : Purchases product
activate RetailerAgent #DarkSalmon
RetailerAgent -> EVM  : invoking ""purchaseItemByRetailer()""
note right #yellow: **""Tx hash""**  for \n Product purchased

note over WholesalerAgent: //Sending Product to ""RetailerAgent""//
WholesalerAgent -> RetailerAgent: Ships Product
WholesalerAgent -> EVM: invoking ""shippedItemByWholesaler()""
note right #yellow: **""Tx hash""**  for \n Product shipped
deactivate WholesalerAgent

note over RetailerAgent: //Receives Product//
RetailerAgent -> EVM: invoking ""receivedItemByRetailer()""
note right #yellow: **""Tx hash""**  for \n Product received
deactivate EVM
RetailerAgent -> MainAgent
deactivate RetailerAgent


MainAgent -> Customer : Sells Product
deactivate MainAgent
deactivate Customer
@enduml